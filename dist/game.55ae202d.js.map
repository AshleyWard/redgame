{"version":3,"sources":["src/js/game.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["GameScene","key","load","spritesheet","frameWidth","frameHeight","image","width","config","height","controls","jump","input","keyboard","addKey","Phaser","Input","Keyboard","KeyCodes","SPACE","attack","Q","gameState","keys","cursors","createCursorKeys","acorns","inventory","acornDisplay","count","sprites","update","console","log","length","sqrl","physics","add","sprite","game","shadow","speed","y","player","group","onGround","squirrel","anims","create","frames","generateFrameNumbers","frameRate","repeat","start","end","actions","jumpHelper","yChanged","lastY","jumpTween","tweens","paused","targets","ease","duration","yoyo","onComplete","jumping","jumpShadeTween","scaleX","basicWeapon","name","delay","growTime","lifeTime","dropRate","weapons","currentWeapon","disabled","proj","facing","facingOffsetX","facingOffsetY","attackNut","x","setScale","play","nutCol","collider","acornTweenY","plant","destroy","acornTweenX","lastAttack","time","delayedCall","trees","list","grow","tree","scene","youngTree","setName","type","wholeTree","drops","Math","ceil","random","ind","floor","variance","drop","step","treeBaby","newTree","growCallback","push","pt","fallDist","newNut","dropTween","display","stop","i","world","randomPoint","bgFloor1","rectangle","bgFloor2","setRotation","bgFloors","staticGroup","platforms","floor1","refreshBody","floor2","floor3","roofs","roof1","setVisible","plCol","roCol","touchingRoof","flCol","overlapOnly","charLayer","layer","midLayer","bgLayer","setDepth","drawDebug","debugGraphic","visible","on","left","isDown","right","up","down","horizontalInput","verticalInput","anyDirection","children","entries","setVelocityX","setVelocityY","pause","diff","Scene","symbol","countLen","toString","len","newDigit","text","last","pop","digit","valueAtDigit","charAt","setText","num","bounds","top","bottom","AUTO","backgroundColor","default","arcade","enableBody","debug","Game","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"game.55ae202d.js","sourceRoot":"..","sourcesContent":["/** @type {import(\"../../typings/phaser\")} */\r\n\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super( { key: 'GameScene' } );\r\n    }\r\n\r\n    preload ()\r\n    {\t\r\n        this.load.spritesheet('sqrl', './src/img/SQORL.png', { frameWidth:48, frameHeight:48 } );  //48 x 48\r\n        this.load.spritesheet('acorn', './src/img/acorn.png', { frameWidth:48, frameHeight:48 } );  //48 x 48\r\n        this.load.image('stump', './src/img/stump.png') ;  //48 x 48\r\n        this.load.image('shadow', './src/img/shadow.png') ;  //48 x 48\r\n        this.load.image('sapling', './src/img/sapling.png') ;  //48 x 48\r\n        this.load.image('youngling', './src/img/youngling.png') ;  //48 x 48\r\n        this.load.image('wholeling', './src/img/wholeling.png') ;  //48 x 48\r\n    }\r\n\r\n    create ()\r\n    {\t\r\n        var width = config.width;\r\n        var height = config.height;\r\n\r\n        controls = {\r\n            jump: this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),\r\n            attack: this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Q)\r\n        }\r\n\r\n        gameState.keyboard = this.input.keyboard.keys\r\n        gameState.cursors = this.input.keyboard.createCursorKeys(); //  Input Events\t\r\n\r\n        //interface\r\n        //#region\r\n\r\n        //AcornDisplay\r\n        var acorns = gameState.inventory.acorns;\r\n\r\n        var acornDisplay = {\r\n            count:      acorns,\r\n            sprites:    [],\r\n            update()    {\r\n                console.log(this.count.length);\r\n            }\r\n        }\r\n\r\n        //#endregion\r\n\r\n        //player\r\n        //#region\r\n        //squirrel & shadow\r\n        var sqrl    = this.physics.add.sprite(game.config.width/2, game.config.height-100, 'sqrl')\r\n        var shadow  = this.add.sprite(game.config.width/2, game.config.height-100, 'shadow')\r\n\r\n        sqrl.speed  = 220;\r\n        shadow.y    = sqrl.y+25;\r\n        \r\n        //sq+sh become player\r\n        var player = this.physics.add.group([sqrl, shadow]);\r\n        \r\n        gameState.player = player;\r\n\r\n        gameState.player.onGround = true;\r\n        gameState.player.squirrel = sqrl;\r\n        gameState.player.shadow = shadow;\r\n        //#endregion\r\n        \r\n        //anims\r\n        //#region\r\n        this.anims.create({\r\n            key: 'sqrl-left',\r\n            frames: this.anims.generateFrameNumbers('sqrl', { frames: [12, 13, 14] }),\r\n            frameRate: 5,\r\n            repeat: -1\r\n        });\r\n        this.anims.create({\r\n            key: 'sqrl-right',\r\n            frames: this.anims.generateFrameNumbers('sqrl', { frames: [24, 25, 26] }),\r\n            frameRate: 5,\r\n            repeat: -1\r\n        });\r\n        this.anims.create({\r\n            key: 'sqrl-up',\r\n            frames: this.anims.generateFrameNumbers('sqrl', { frames: [36, 37, 38] }),\r\n            frameRate: 5,\r\n            repeat: -1\r\n        });\r\n        this.anims.create({\r\n            key: 'sqrl-down',\r\n            frames: this.anims.generateFrameNumbers('sqrl', { frames: [0, 1, 2] }),\r\n            frameRate: 5,\r\n            repeat: -1\r\n        });\r\n        this.anims.create({\r\n            key: 'acornRotate',\r\n            frames: this.anims.generateFrameNumbers('acorn', {start: 0, end: 9}),\r\n            frameRate: 10,\r\n            repeat: -1\r\n        });\r\n        this.anims.create({\r\n            key: 'acornShake',\r\n            frames: this.anims.generateFrameNumbers('acorn', { frames: [0, 1, 0, 9] }),\r\n            frameRate: 3,\r\n            repeat: -1\r\n        });\r\n        //#endregion\r\n\r\n        //actions\r\n        //#region\r\n\r\n        //JUMP\r\n        gameState.actions.jumpHelper = this.physics.add.sprite(0, 0)\r\n        gameState.actions.jumpHelper.yChanged = false;\r\n        gameState.actions.jumpHelper.lastY = 0;\r\n        gameState.actions.jump = () => {\r\n        \r\n\r\n            let jumpTween = this.tweens.add({\r\n                paused:     false,\r\n                targets:    gameState.actions.jumpHelper,\r\n                y:          gameState.actions.jumpHelper.y - 100,\r\n                ease:       'Sine',\r\n                duration:   400,\r\n                repeat:     0,\r\n                yoyo:       true,\r\n                onComplete: function () {\r\n                    gameState.player.jumping = false;\r\n                }\r\n            });\r\n\r\n            let jumpShadeTween = this.tweens.add({\r\n                paused:     false,\r\n                targets:    gameState.player.shadow,\r\n                scaleX:     1.3,\r\n                ease:       'Sine',\r\n                duration:   400,\r\n                repeat:     0,\r\n                yoyo:       true,\r\n                onComplete: function () {\r\n                    gameState.player.jumping = false;\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        \r\n        //ATTACK\r\n        var basicWeapon = {\r\n            name:       'acorn',\r\n            delay:      500,\r\n            growTime:   5000,\r\n            lifeTime:   50000,\r\n            dropRate:   2.5\r\n        }\r\n\r\n        gameState.weapons = {};\r\n        gameState.weapons.currentWeapon = basicWeapon;\r\n\r\n        gameState.actions.attack = () => {};\r\n        gameState.actions.attack.disabled = false;\r\n\r\n        gameState.actions.attack = () => {\r\n            if(!gameState.actions.attack.disabled) {\r\n                //Vars\r\n                var proj = gameState.weapons.currentWeapon;\r\n                var squirrel = gameState.player.squirrel;\r\n\r\n                //Attack!\r\n                console.log(`I shoot a ${proj.name} at you! pew!`)\r\n\r\n                var facing = gameState.player.facing;\r\n\r\n                let facingOffsetX = 0;\r\n                let facingOffsetY = 0;\r\n\r\n                if (facing === 'left')  { facingOffsetX = -25 }\r\n                if (facing === 'right') { facingOffsetX = 25 }\r\n                if (facing === 'up')    { facingOffsetY = -25 }\r\n                if (facing === 'down')  { facingOffsetY = 25 }\r\n\r\n                var attackNut = this.physics.add.sprite(squirrel.x + facingOffsetX, squirrel.y + facingOffsetY, proj.name)\r\n                attackNut.setScale(0.5);\r\n                attackNut.anims.play('acornRotate',true);\r\n\r\n                var nutCol = this.physics.add.collider(attackNut, squirrel, () => {\r\n                    console.log('contact - change this when there are real targets for nuts!');\r\n                });\r\n\r\n                let acornTweenY = this.tweens.add({\r\n                    paused:     true,\r\n                    targets:    attackNut,\r\n                    y:          squirrel.y - 100 + (2*facingOffsetY),\r\n                    ease:       'Sine',\r\n                    duration:   400,\r\n                    repeat:     0,\r\n                    yoyo:       true,\r\n                    onComplete: function () {\r\n                        gameState.actions.plant(attackNut, proj);\r\n                        attackNut.destroy();\r\n                    }\r\n                });\r\n                let acornTweenX = this.tweens.add({\r\n                    paused:     true,\r\n                    targets:    attackNut,\r\n                    x:          squirrel.x + facingOffsetX * 15,\r\n                    ease:       'Linear',\r\n                    duration:   800,\r\n                    repeat:     0,\r\n                    yoyo:       false\r\n                });\r\n\r\n                acornTweenY.play()\r\n                acornTweenX.play()\r\n\r\n\r\n                //Attack delay timer:\r\n                gameState.actions.attack.disabled = true;\r\n                gameState.actions.attack.lastAttack = this.time.delayedCall(proj.delay, () => {\r\n                    gameState.actions.attack.disabled = false;\r\n                    console.log('Attack ready');\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n        //GROW\r\n        gameState.trees = {\r\n            list:   [],\r\n            grow:   function(tree, scene){\r\n                if (tree.sprite.name === 'sapling'){\r\n\r\n                    var youngTree = scene.add.sprite(tree.sprite.x, tree.sprite.y, 'youngling')\r\n                    youngTree.setName('youngling');\r\n                    \r\n                    tree.sprite.destroy()\r\n                    tree.sprite = youngTree;\r\n\r\n                    scene.time.delayedCall(tree.type.growTime, () => {\r\n                        gameState.trees.grow(tree, scene);\r\n                    });\r\n\r\n                    //console.log(`${tree} has grown, it is now a ${tree.sprite.name}`)\r\n\r\n                } else if (tree.sprite.name === 'youngling'){\r\n\r\n                    var wholeTree = scene.add.sprite(tree.sprite.x, tree.sprite.y-24, 'wholeling');\r\n                    wholeTree.setName('wholeling');\r\n                    wholeTree.setScale(1,1);\r\n\r\n                    \r\n                    tree.sprite.destroy()\r\n                    tree.sprite = wholeTree;\r\n\r\n                    scene.time.delayedCall(tree.type.lifeTime, () => {\r\n                        gameState.trees.grow(tree, scene);\r\n                    });\r\n                    \r\n                    scene.time.delayedCall(tree.type.lifeTime, () => {\r\n                        gameState.trees.grow(tree, scene);\r\n                    });\r\n\r\n                    scene.time.delayedCall(tree.type.lifeTime, () => {\r\n                        gameState.trees.grow(tree, scene);\r\n                    });\r\n\r\n                    //console.log(`${tree} has grown, it is now a ${tree.sprite.name}`)\r\n\r\n                    //Drop acorns\r\n                    let drops = Math.ceil(Math.random() * tree.type.dropRate);\r\n                    for (let ind = 0; ind < drops; ind++){\r\n                        scene.time.delayedCall(Math.floor(Math.random() * tree.type.lifeTime), () => {\r\n                            var variance = 5;\r\n                            gameState.actions.drop({ x: tree.sprite.x - variance + Math.random() * variance*2, y: 30 + tree.sprite.y - variance + Math.random() * variance * 2}, tree.type)\r\n                        });\r\n                    }\r\n\r\n                } else if (tree.sprite.name === 'wholeling'){\r\n                    \r\n                    tree.sprite.destroy()\r\n                    //console.log(`${tree} has died.`);\r\n\r\n                } else {\r\n                    console.log('an error has occurred in gameState.trees.grow()');\r\n                }\r\n\r\n                tree.step += 1\r\n            }\r\n        }\r\n\r\n        //PLANT\r\n        gameState.actions.plant = (attackNut, proj) => {\r\n            //attackNut: The actual sprite being acted on\r\n            //proj:      Projectile properties\r\n            var treeBaby = this.add.sprite(attackNut.x, attackNut.y, 'sapling').setName('sapling');\r\n            var newTree;\r\n            newTree = {\r\n                type:           proj,\r\n                sprite:         treeBaby,\r\n                step:           0,\r\n                growCallback:   this.time.delayedCall(proj.growTime, () => {\r\n                    gameState.trees.grow(newTree, this);\r\n                })\r\n            }\r\n            gameState.trees.list.push(newTree);\r\n\r\n        }\r\n\r\n\r\n        //DROP\r\n        gameState.actions.drop = (pt, proj) => {\r\n\r\n            let fallDist = 85;\r\n\r\n            var newNut = this.physics.add.sprite(pt.x, pt.y - fallDist, proj.name)\r\n            newNut.setScale(0.35)\r\n            \r\n\r\n            newNut.anims.play('acornRotate');\r\n            \r\n            var dropTween = this.tweens.add({\r\n                paused:     false,\r\n                targets:    newNut,\r\n                y:          newNut.y + fallDist,\r\n                ease:       'Bounce',\r\n                duration:   1000,\r\n                repeat:     0,\r\n                yoyo:       false,\r\n                onComplete: () =>   {\r\n                    if(newNut){\r\n\r\n                        var nutCol = this.physics.add.collider(newNut, gameState.player.squirrel, () => {\r\n                            newNut.destroy();\r\n                            gameState.inventory.acorns.display.add(this, 1);\r\n                        }) \r\n                        newNut.anims.stop();\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        for (let i = 1; i < 2; i++){\r\n            gameState.actions.drop(gameState.world.randomPoint(), gameState.weapons.currentWeapon);\r\n        }\r\n\r\n        //#endregion\r\n        \r\n\r\n        // ===WORLD===\r\n        //bgFloors\r\n        //#region\r\n        var bgFloor1     = this.add.rectangle(width/2, height*1.1, width*2, height, 0x00FF00, 1);\r\n        var bgFloor2     = this.add.rectangle(width/2, height*1.1, width*2, height, 0x00FF00, 1);\r\n        bgFloor1.setRotation(-0.1);\r\n        bgFloor2.setRotation(0.1);\r\n\r\n        var bgFloors = this.physics.add.staticGroup([bgFloor1, bgFloor2])\r\n        //#endregion\r\n\r\n        //Floors\r\n        //#region\r\n        var platforms = this.physics.add.staticGroup();\r\n        var floor1 = platforms.create(game.config.width/2, game.config.height, 'floor').setScale(25,1).refreshBody();\r\n        var floor2 = platforms.create(0, game.config.height-150, 'floor').setScale(.25,10).refreshBody();\r\n        var floor3 = platforms.create(game.config.width, game.config.height-150, 'floor').setScale(.25,10).refreshBody();\r\n        //#endregion\r\n\r\n        //Roofs\r\n        //#region\r\n        var roofs = this.physics.add.staticGroup();\r\n        var roof1 = roofs.create(400, 150,   'floor').setScale(25,10).refreshBody();\r\n        var roof1 = roofs.create(400, 160,   'floor').setScale(20,10).refreshBody();\r\n        var roof1 = roofs.create(400, 170,   'floor').setScale(15,10).refreshBody();\r\n        var roof1 = roofs.create(400, 180,   'floor').setScale(10,10).refreshBody();\r\n        var roof1 = roofs.create(400, 190,   'floor').setScale( 5,10).refreshBody();\r\n\r\n        roofs.setVisible(false);\r\n        //#endregion\r\n\r\n        //stumps\r\n        /*\r\n        var stumps = this.physics.add.group({ allowGravity: false });\r\n        var s1 = stumps.create(225,490, 'stump');\r\n        var s2 = stumps.create(0,game.config.height, 'stump');\r\n        */\r\n\r\n        //world colliders\r\n        //#region\r\n        var plCol = this.physics.add.collider(gameState.player.squirrel, platforms, () => {\r\n\r\n        });\r\n        var roCol = this.physics.add.collider(gameState.player.squirrel, roofs, () => {\r\n            gameState.player.touchingRoof = true;\r\n        });\r\n        var flCol = this.physics.add.collider(gameState.player.squirrel, bgFloors, () => {\r\n            gameState.player.touchingRoof = false;\r\n        });\r\n        flCol.overlapOnly = true;\r\n        //var stCol = this.physics.add.collider(gameState.player.squirrel, stumps, () => {\r\n\r\n        //});\r\n        //#endregion\r\n\r\n        //layers\r\n        //#region\r\n        var charLayer = this.add.layer([ sqrl,\r\n                                        shadow ]);\r\n\r\n        var midLayer = this.add.layer([ \r\n                                          ])\r\n\r\n        var bgLayer = this.add.layer([  floor1,\r\n                                        floor2,\r\n                                        floor3,\r\n                                        bgFloor1,\r\n                                        bgFloor2])\r\n        \r\n        charLayer.setDepth(0);\r\n        midLayer.setDepth(1);\r\n        bgLayer.setDepth(-2);\r\n        //#endregion\r\n\r\n        //debug\r\n        //#region \r\n        this.physics.world.drawDebug = !this.physics.world.drawDebug;\r\n        this.physics.world.debugGraphic.visible = this.physics.world.drawDebug;\r\n        this.input.on('pointerdown', () => {\r\n            this.physics.world.drawDebug = !this.physics.world.drawDebug;\r\n            this.physics.world.debugGraphic.visible = this.physics.world.drawDebug;\r\n        })\r\n        //#endregion\r\n    }\r\n\r\n    update ()\r\n    {\t\r\n        let left    = gameState.cursors.left.isDown;\r\n        let right   = gameState.cursors.right.isDown;\r\n        let up      = gameState.cursors.up.isDown;\r\n        let down    = gameState.cursors.down.isDown;\r\n\r\n        let jump = controls.jump.isDown;\r\n        let attack = controls.attack.isDown;\r\n\r\n        let horizontalInput = (left || right);\r\n        let verticalInput = (up || down);\r\n        let anyDirection   = (horizontalInput || verticalInput);\r\n\r\n        let player = gameState.player;\r\n        let squirrel = gameState.player.squirrel;\r\n        let shadow = gameState.player.children.entries[1];\r\n\r\n        if (attack) {\r\n            if(gameState.inventory.acorns.display.count > 0 && !gameState.actions.attack.disabled) {\r\n                gameState.inventory.acorns.display.add(this, -1);\r\n                gameState.actions.attack();\r\n            }\r\n        }\r\n\r\n        if (jump) {\r\n            if(!player.jumping) {\r\n                player.jumping = true;\r\n                gameState.actions.jump();\r\n            }\r\n        }\r\n\r\n        if (left)\r\n        {\r\n            player.setVelocityX(-squirrel.speed);\r\n            squirrel.anims.play('sqrl-left', true);\r\n            player.facing = 'left';\r\n        }\r\n        if (right)\r\n        {\t\t\t\r\n            player.setVelocityX(squirrel.speed);\r\n            squirrel.anims.play('sqrl-right', true);\r\n            player.facing = 'right';\r\n        }\r\n        if (up && player.onGround && !player.touchingRoof)\r\n        {\r\n            player.setVelocityY(-squirrel.speed/2);\r\n            if (!horizontalInput) { \r\n                squirrel.anims.play('sqrl-up', true)\r\n                player.facing = 'up'; \r\n            }\r\n        }\r\n        if (down)\r\n        {\r\n            player.setVelocityY(squirrel.speed/2);\r\n            if (!horizontalInput) { \r\n                squirrel.anims.play('sqrl-down', true)\r\n                player.facing = 'down';  \r\n            }\r\n        }\r\n\r\n        if (!anyDirection)\r\n        {\r\n            squirrel.anims.pause();\r\n        } else {\r\n            shadow.x = squirrel.x;\r\n            if(!player.jumping){\r\n                shadow.y = squirrel.y+25;\r\n            }\r\n        }\r\n\r\n        //#region ==> Multiple controls at once...\r\n        if (!left && !right || left && right)\r\n        {\r\n            player.setVelocityX(0);\r\n        }\r\n        if (!up && !down || up && down)\r\n        {\r\n            player.setVelocityY(0);\r\n        }\r\n        //#endregion\r\n        if (gameState.actions.jumpHelper.y != gameState.actions.jumpHelper.lastY){\r\n            let diff = gameState.actions.jumpHelper.lastY - gameState.actions.jumpHelper.y\r\n            //squirrel.height = squirrel.height + diff\r\n            squirrel.y -= diff;\r\n            //console.log(squirrel.height);\r\n            gameState.actions.jumpHelper.lastY = gameState.actions.jumpHelper.y\r\n        }\r\n        \r\n        if (player.touchingRoof) {\r\n            squirrel.y += 1;\r\n            shadow.y += 1;\r\n        }\r\n\r\n        //gameState.inventory.display.update();\r\n\r\n    }\r\n}\r\n\r\nvar player = {\r\n    squirrel:       {},\r\n    shadow:         {},\r\n    touchingRoof:   false,\r\n    onGround:       false,\r\n    jumping:        false,\r\n    facing:         '',\r\n\r\n}\r\n\r\nvar actions = {\r\n    jumpHelper: {\r\n        y:     '',\r\n        lastY: ''\r\n    }\r\n}\r\n\r\n\r\nvar gameState = {\r\n    inventory: {\r\n        acorns: {\r\n            display:    {\r\n                count:      1,\r\n                symbol:     '',\r\n                sprites:    [],\r\n                update(scene)    {\r\n\r\n                    if (!this.symbol) {\r\n                        this.symbol = scene.add.sprite(26, 36, 'acorn');\r\n                        this.symbol.setScale(0.4)\r\n                        this.symbol.anims.play('acornShake');\r\n                    }\r\n\r\n                    var countLen = this.count.toString().length;\r\n                    let len = this.sprites.length\r\n\r\n                    if (len < countLen) {\r\n                        var newDigit = scene.add.text(30 + 20 * countLen, 30)\r\n                        \r\n                        this.sprites.push(newDigit);\r\n                    } else if (len > countLen) {\r\n                        let last = this.sprites.pop();\r\n                        last.destroy();\r\n                    } \r\n\r\n                    for (digit = 0; digit < countLen; digit++){\r\n\r\n                        let valueAtDigit = this.count.toString().charAt(digit);\r\n                        this.sprites[digit].setText(valueAtDigit);\r\n\r\n\r\n                        //console.log(this.sprites[digit].value);\r\n                    }\r\n\r\n                },\r\n                add(scene, num)    {\r\n                    this.count += num;\r\n                    this.update(scene);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    world:  {\r\n        bounds:     {\r\n            top:    390,\r\n            left:   0,\r\n            bottom: 650,\r\n            right:  800\r\n        },\r\n        randomPoint() {\r\n            var x = Math.floor(  Math.random() * this.bounds.right );\r\n            var y = Math.floor(  Math.random() * (this.bounds.bottom - this.bounds.top)  )  + this.bounds.top;\r\n            var pt  = {x, y}\r\n            return pt;\r\n        }\r\n    },\r\n    player: player,\r\n    actions: actions,\r\n    weapons: {}\r\n}\r\n\r\n\r\n\r\nvar controls = {};\r\n\r\n\r\nvar config = {\r\n    type: Phaser.AUTO,\r\n    width: 800,\r\n    height: 650,\r\n\tbackgroundColor: 0x80AADC,\r\n    physics: {\r\n        default: 'arcade',\r\n        arcade: {\r\n            //gravity:    { y: 500 },\r\n            enableBody: true,\r\n            debug: true\r\n        }\r\n    },\r\n    scene: [GameScene]\r\n};\r\n\r\n\r\nlet game = new Phaser.Game(config);","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}